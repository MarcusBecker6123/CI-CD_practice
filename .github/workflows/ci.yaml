name: CI Pipeline

on: 
    push:
        branches: [ "main", "master" ]
    pull_request:
	branches: [ "main", "master" ]

jobs:
    test_app:
	runs_on: ubuntu-latest
	steps: 
	  - name: Checkout Code
	    uses: actions/checkout@v4

	  - name: Set up Python
	    uses: actions/setup-python@v4
	    with: 
		python-version: '3.9'
	
	  - name: Install Dependencies
	    run: |
		python -m pip install --upgrade pip
		pip install -r requirements.txt

	  - name: run tests
	    env: 
		DOMAIN_NAME: "github-actions-test.local"
	    run: |
		pytest
